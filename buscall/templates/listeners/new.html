{% extends 'base.html' %}
{% block title %}New Listener{% endblock %}

{% block header %}<h1>New Listener</h1>{% endblock %}
{% macro with_errors(field) %}
    <div class="form_field">
    {{field.label}}
    {% if field.errors %}
        {% set css_class = 'has_error ' + kwargs.pop('class', '') %}
        {{ field(class=css_class, **kwargs) }}
        <ul class="errors">{% for error in field.errors %}<li>{{ error }}</li>{% endfor %}</ul>
    {% else %}
        {{ field(**kwargs) }}
    {% endif %}
    </div>
{% endmacro %}
{% block main %}
<form method="POST" action="{{ url_for('new_listener') }}">
    {{form.hidden_tag()}}
    <fieldset id="bus-info">
        <noscript>This form requires Javascript.</noscript>
        {{ with_errors(form.agency_id) }}
        {{ with_errors(form.route_id) }}
        {{ with_errors(form.direction_id) }}
        {{ with_errors(form.stop_id) }}
    </fieldset>
    <fieldset id="time-info">
        {{ with_errors(form.start) }}
        {{ with_errors(form.end) }}

        <table>
            <thead>
                <th>{{form.sun.label}}</th>
                <th>{{form.mon.label}}</th>
                <th>{{form.tue.label}}</th>
                <th>{{form.wed.label}}</th>
                <th>{{form.thu.label}}</th>
                <th>{{form.fri.label}}</th>
                <th>{{form.sat.label}}</th>
            </thead>
            <tbody>
                <td>{{form.sun}}</td>
                <td>{{form.mon}}</td>
                <td>{{form.tue}}</td>
                <td>{{form.wed}}</td>
                <td>{{form.thu}}</td>
                <td>{{form.fri}}</td>
                <td>{{form.sat}}</td>
            </tbody>
        </table>
    </fieldset>
    <input type="submit" value="Create Listener" />
</form>
{% endblock %}