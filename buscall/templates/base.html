{#- based on HTML5 boilerplate: http://html5boilerplate.com/ #}
<!DOCTYPE html>
<html>
<head>
  {% block head %}
    <title>{% block title %}{% endblock %} | Bus Calling</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link href="/css/style.css" rel="stylesheet" type="text/css" />
    <link href='http://fonts.googleapis.com/css?family=Gentium+Basic:400,700' rel='stylesheet' type='text/css'>
    {#- <link href="/css/le-frog/jquery-ui-1.8.13.custom.css" rel="stylesheet" type="text/css" /> #}
    <link href="/css/timepicker.css" rel="stylesheet" type="text/css" />
  {% endblock %}
</head>
<body>
  <div id="container">
    <header>{% block header %}{% endblock %}</header>
    {% block flash %}
    {%- for category, msg in get_flashed_messages(with_categories=true) %}
      <p class=flash-{{ category }}>{{ msg }}</p>
    {%- endfor %}
    {% endblock %}
    {% block nav %}
    <nav>
      {% if user %}
      <a href="{{ logout_url }}">Logout</a>
      {% else %}
      <a href="{{ login_url }}">Login</a>
      {% endif %}
    </nav>
    {% endblock %}
    <div id="main" role="main">
      {% block main %}{% endblock %}
    </div>
    <footer>{% block footer %}
      Copyright 2011, <a href="http://davidbaumgold.com">David Baumgold</a>
    {% endblock %}</footer>
  </div>
  {% if js_file %}
      <script>
        window.app = {};
        app.model = {% if js_model %}{{js_model|safe}}{% else %}null{% endif %};
      </script>
    {% if config.DEBUG %}
      {%- for script in ["jquery-1.6.1", "jquery.timepicker", "underscore", "proto-ext", "json2", js_file] %}
        <script src="/js/{{script}}.js"></script>
      {%- endfor %}
    {% else %}
      <script src="/js/yepnope.1.0.1-min.js"></script>
      <script>
        yepnope([{
          // no prior dependencies
          load: {
            'jquery': "//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js",
            'und': "/js/underscore.min.js",
          },
          callback: {
            'jquery': function(url, result, key) {
              if (!window.jQuery) {
                yepnope("/js/jquery-1.6.1.min.js");
              }
            }
          }
        }, {
          load: {
            // timePicker depends on jQuery
            'time': "/js/jquery.timepicker.js",
            // prototype extensions depend on Underscore
            // Note that this is NOT the Prototype.js library
            'ext': "/js/proto-ext.js"
          }
        }, {
          test: window.JSON,
          nope: "/js/json2.js"
        }, {
          load: "/js/{{ js_file }}.js"
        }])
      </script>
    {% endif %}
  {% endif %}
</body>
</html>